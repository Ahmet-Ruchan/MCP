<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Generator - AI Powered</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .code-preview {
            background: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
        }
        .tab-active {
            background: #667eea;
            color: white;
        }
        .component-card {
            transition: all 0.3s;
        }
        .component-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white py-12 px-6 text-center rounded-b-2xl shadow-lg">
        <h1 class="text-5xl font-bold mb-2">ü§ñ MCP Generator</h1>
        <p class="text-xl opacity-95">AI-Powered MCP Server Generation with Claude</p>
    </div>

    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 py-8">

        <!-- API Key Section -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                <div class="flex-1 w-full">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                        üîë Claude API Key
                    </label>
                    <input
                        type="password"
                        id="apiKey"
                        placeholder="sk-ant-..."
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none transition"
                    >
                    <p class="text-sm text-gray-500 mt-2">
                        Get your API key from <a href="https://console.anthropic.com" target="_blank" class="text-purple-600 hover:underline">console.anthropic.com</a>
                    </p>
                </div>
                <div class="w-full md:w-auto">
                    <div class="bg-purple-50 rounded-lg p-4 text-center">
                        <p class="text-sm font-semibold text-gray-700 mb-2">üìä Components</p>
                        <div class="flex gap-4 justify-center">
                            <div>
                                <p class="text-2xl font-bold text-purple-600" id="toolCount">0</p>
                                <p class="text-xs text-gray-600">Tools</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-green-600" id="resourceCount">0</p>
                                <p class="text-xs text-gray-600">Resources</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-orange-600" id="promptCount">0</p>
                                <p class="text-xs text-gray-600">Prompts</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">

            <!-- Left Column: Basic Information -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üìù Basic Information</h2>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Server Name</label>
                        <input
                            type="text"
                            id="serverName"
                            placeholder="my-awesome-server"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none transition"
                        >
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Server Type</label>
                        <select
                            id="serverType"
                            onchange="updateServerType()"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none transition"
                        >
                            <option value="tool">üõ†Ô∏è Tool - Functions Claude can call</option>
                            <option value="resource">üìö Resource - Data Claude can read</option>
                            <option value="full">üéØ Full - Tools + Resources + Prompts</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Description</label>
                        <textarea
                            id="description"
                            rows="4"
                            placeholder="Describe what your MCP server does..."
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none transition"
                        ></textarea>
                    </div>

                    <div id="typeInfo" class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded">
                        <p class="text-sm text-gray-700">üõ†Ô∏è <strong>Tool Server:</strong> Provides executable functions that Claude can call to perform actions</p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Components -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üîß Components</h2>

                <!-- Tool Input -->
                <div id="toolSection" class="mb-4">
                    <details class="group">
                        <summary class="cursor-pointer bg-purple-50 hover:bg-purple-100 px-4 py-3 rounded-lg font-semibold text-purple-700 transition">
                            ‚ûï Add Tool
                        </summary>
                        <div class="mt-4 space-y-3 p-4 border-2 border-gray-200 rounded-lg">
                            <input type="text" id="toolName" placeholder="Tool name (e.g., calculate)" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                            <input type="text" id="toolDesc" placeholder="Description" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                            <textarea id="toolParams" rows="3" placeholder="Parameters (one per line: name:type:description)&#10;x:number:First number&#10;y:number:Second number" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"></textarea>
                            <button onclick="addTool()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition">
                                Add Tool
                            </button>
                        </div>
                    </details>
                </div>

                <!-- Resource Input -->
                <div id="resourceSection" class="mb-4 hidden">
                    <details class="group">
                        <summary class="cursor-pointer bg-green-50 hover:bg-green-100 px-4 py-3 rounded-lg font-semibold text-green-700 transition">
                            ‚ûï Add Resource
                        </summary>
                        <div class="mt-4 space-y-3 p-4 border-2 border-gray-200 rounded-lg">
                            <input type="text" id="resourceUri" placeholder="URI (e.g., data://mydata)" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            <input type="text" id="resourceName" placeholder="Name" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            <input type="text" id="resourceDesc" placeholder="Description" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            <select id="resourceMime" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                                <option value="text/plain">text/plain</option>
                                <option value="application/json">application/json</option>
                                <option value="text/html">text/html</option>
                            </select>
                            <button onclick="addResource()" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition">
                                Add Resource
                            </button>
                        </div>
                    </details>
                </div>

                <!-- Prompt Input -->
                <div id="promptSection" class="mb-4 hidden">
                    <details class="group">
                        <summary class="cursor-pointer bg-orange-50 hover:bg-orange-100 px-4 py-3 rounded-lg font-semibold text-orange-700 transition">
                            ‚ûï Add Prompt
                        </summary>
                        <div class="mt-4 space-y-3 p-4 border-2 border-gray-200 rounded-lg">
                            <input type="text" id="promptName" placeholder="Prompt name (e.g., analyze)" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none">
                            <input type="text" id="promptDesc" placeholder="Description" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none">
                            <button onclick="addPrompt()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-4 rounded-lg transition">
                                Add Prompt
                            </button>
                        </div>
                    </details>
                </div>
            </div>
        </div>

        <!-- Components Display -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div>
                <h3 class="font-bold text-purple-700 mb-2">üõ†Ô∏è Tools</h3>
                <div id="toolsList" class="space-y-2"></div>
            </div>
            <div>
                <h3 class="font-bold text-green-700 mb-2">üìö Resources</h3>
                <div id="resourcesList" class="space-y-2"></div>
            </div>
            <div>
                <h3 class="font-bold text-orange-700 mb-2">üí¨ Prompts</h3>
                <div id="promptsList" class="space-y-2"></div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="generateWithClaude()" class="bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition">
                    ü§ñ Generate with Claude AI
                </button>
                <button onclick="resetAll()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition">
                    üîÑ Reset All
                </button>
                <button id="downloadBtn" onclick="downloadZip()" disabled class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition">
                    ‚¨áÔ∏è Download ZIP
                </button>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="hidden mb-6"></div>

        <!-- Generated Code Preview -->
        <div id="codePreview" class="hidden bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">‚ú® Generated MCP Server Code</h2>

            <!-- Tabs -->
            <div class="flex gap-2 mb-4">
                <button onclick="showTab('code')" id="codeTab" class="tab-active px-6 py-2 rounded-lg font-semibold transition">
                    üìÑ server.py
                </button>
                <button onclick="showTab('instructions')" id="instructionsTab" class="bg-gray-200 hover:bg-gray-300 px-6 py-2 rounded-lg font-semibold transition">
                    üìã Setup Instructions
                </button>
            </div>

            <!-- Code Tab -->
            <div id="codeContent" class="code-preview p-6 max-h-96 overflow-auto">
                <pre><code id="generatedCode" class="text-sm text-green-400 font-mono whitespace-pre-wrap"></code></pre>
            </div>

            <!-- Instructions Tab -->
            <div id="instructionsContent" class="hidden space-y-4">
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded">
                    <h3 class="font-bold text-green-800 mb-2">‚úÖ Your MCP Server is Ready!</h3>
                    <p class="text-gray-700"><strong>Included files:</strong> server.py, requirements.txt, README.md</p>
                </div>

                <div class="space-y-2">
                    <h3 class="font-bold text-gray-800">üì¶ Installation Steps:</h3>
                    <ol class="list-decimal list-inside space-y-1 text-gray-700 ml-4">
                        <li>Download the ZIP file using the button above</li>
                        <li>Extract the ZIP file</li>
                        <li>Run: <code class="bg-gray-100 px-2 py-1 rounded">pip install -r requirements.txt</code></li>
                        <li>Configure in Claude Desktop (see below)</li>
                        <li>Start using your MCP server!</li>
                    </ol>
                </div>

                <div class="space-y-2">
                    <h3 class="font-bold text-gray-800">‚öôÔ∏è Claude Desktop Configuration:</h3>
                    <pre id="configJson" class="bg-gray-100 p-4 rounded-lg overflow-x-auto text-sm"></pre>
                    <p class="text-sm text-gray-600">
                        <strong>Config file locations:</strong><br>
                        ‚Ä¢ macOS: <code class="bg-gray-100 px-2 py-1 rounded">~/Library/Application Support/Claude/claude_desktop_config.json</code><br>
                        ‚Ä¢ Windows: <code class="bg-gray-100 px-2 py-1 rounded">%APPDATA%\Claude\claude_desktop_config.json</code>
                    </p>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <div class="text-center py-8 text-gray-600">
        Made with ‚ù§Ô∏è using Claude AI | <a href="https://modelcontextprotocol.io" target="_blank" class="text-purple-600 hover:underline">Learn about MCP</a>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
